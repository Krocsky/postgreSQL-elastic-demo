export function excludePwdParams(params) {
  let safeRet = {}
  let keys = Object.keys(params)
  let counter = 0
  keys.forEach((key) => {
    if (!/pwd/ig.test(key)) {
      safeRet[key] = params[key]
    } else {
      counter += 1
      safeRet['__description'] = `已过滤掉密码相关参数${counter}个`
    }
  })
  return JSON.stringify(safeRet, null, 2)
}

// 打印参数日志
export default logger => ({ body, query }, _, next) => {
  logger.info(excludePwdParams(body || query))
  next()
}

