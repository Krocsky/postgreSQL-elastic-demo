const elasticsearch = require('elasticsearch')

const { createOrUpdateDocument, searchByCustomProperty, searchByIds, searchByFields } = require('../src/documents')

const LogLevel = {
  ERROR: 'error',
  WARNING: 'warning',
  INFO: 'info',
  DEBUG: 'debug',
  TRACE: 'trace',
}

/**
 * 初始化elasticsearch客户端
 * @param { STRING } host 主机地址
 * @param { STRING } port 端口
 * @param { STRING } logLevel 日志等级
 */
function initClient(host, port = '9200', logLevel = LogLevel.INFO) {
  const esClient = new elasticsearch.Client({
    host: `${ host }:${ port }`,
    log: logLevel,
  })
  return esClient
}

module.exports = {
  LogLevel,
  initClient,

  createOrUpdateDocument,
  searchByCustomProperty,
  searchByIds,
  searchByFields,
}
